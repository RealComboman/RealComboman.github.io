<!DOCTYPE html><html><head>
<title>Minesweeper</title>
<style>
body {font-family: Arial, sans-serif; text-align: center;}
.board {display: inline-block; margin: 20px;}
.cell {width: 30px; height: 30px;  border: 1px solid #ccc;  display: inline-block; text-align: center; vertical-align: middle; font-size: 20px; cursor: pointer; background-color: #eee; color: #333;}
.revealed { background-color: #ccc; color: blue;}
.revealmid { background-color: #ccc; color: green;}
.revealbig { background-color: #ccc; color: red;}
.mine {background-color: #ff3333;}
</style>
</head>
<body>
    <h1>Minesweeper</h1>
    <div id="gameBoard"></div>
	<br><div id="score"></div>
	<br><select id="board_size"> 
	<option value="sm">Small (8x8)</option>
	<option value="md">Medium (10x10)</option>
	<option value="lr">Large (15x15)</option>
	</select><br><br>
	<input type="button" value="New Game" onclick="newGame()">
</body>
<script>
var numRows = 8;
var numCols = 8;
var numMines = 10;
const gameBoard = document.getElementById("gameBoard");
let board = [];

function initializeBoard() {
	var size = document.getElementById('board_size').value;
	numRows = {"sm": 8, "md": 10, "lr": 15}[size];
	numCols = {"sm": 8, "md": 10, "lr": 15}[size];
	numMines = {"sm": 10, "md": 15, "lr": 20}[size];
	
    for (let i = 0; i < numRows; i++) {
        board[i] = [];
        for ( let j = 0; j < numCols; j++) {
            board[i][j] = { isMine: false, revealed: false, revealbig: false, revealmid: false, count: 0, };
        }
    }
    // Place mines randomly
    let minesPlaced = 0;
    while (minesPlaced < numMines) {
        const row = Math.floor(Math.random() * numRows);
        const col = Math.floor(Math.random() * numCols);
        if (!board[row][col].isMine) {board[row][col].isMine = true; minesPlaced++;}
    }
    // Calculate counts
    for (let i = 0; i < numRows; i++) {
        for ( let j = 0; j < numCols; j++) {
            if (!board[i][j].isMine) {
                let count = 0;
                for ( let dx = -1; dx <= 1;  dx++ ) {
                    for ( let dy = -1; dy <= 1;  dy++ ) {
                        const ni = i + dx;
                        const nj = j + dy;
                        if ( ni >= 0 &&  ni < numRows && nj >= 0 && nj < numCols && board[ni][nj].isMine ) {count++;}
                    }
                }
                board[i][j].count =  count;
            }
        }
    }
}

function revealCell(row, col) {
    if (
        row < 0 || row >= numRows || col < 0 || col >= numCols || board[row][col].revealed ) {
        return;
    }
    board[row][col].revealed = true;
    if (board[row][col].isMine) {alert("Game Over! You stepped on a mine.");} 
	else if (board[row][col].count === 0) 
	{ // If cell has no mines nearby, reveal adjacent cells
        for ( let dx = -1; dx <= 1;  dx++ ) {
            for (let dy = -1; dy <= 1; dy++ ) {revealCell( row + dx, col + dy );}
        }
    }
    renderBoard();
}

function renderBoard() {
    gameBoard.innerHTML = "";
	let foundmines = 0;
	let revealedcells = 0;

    for (let i = 0; i < numRows; i++) {
        for (let j = 0; j < numCols; j++) {
            const cell = document.createElement("div" );
            cell.className = "cell";
            if (board[i][j].revealed) {
                cell.classList.add("revealed"); revealedcells++;
                if (board[i][j].isMine) {
                    cell.classList.add("mine");
                    cell.textContent = "ðŸ’£"; foundmines++; revealedcells--;
                } else if (board[i][j].count > 0) {
					cell.textContent = board[i][j].count; 
					if(board[i][j].count>1){board[i][j].revealmid;cell.classList.add("revealmid");}
					if(board[i][j].count>2){board[i][j].revealbig;cell.classList.add("revealbig");}
				}
            }
            cell.addEventListener( "click", () => revealCell(i, j));
            gameBoard.appendChild(cell);
        }
        gameBoard.appendChild(document.createElement("br"));
    }
	score.innerHTML = "Open: "+revealedcells+" / "+((numRows*numCols)-numMines)+" | Mines: "+foundmines+" / "+numMines;
    if (revealedcells==((numRows*numCols)-numMines)) {alert("Congrats! You cleared all the spaces.");}
}

function newGame(){
	initializeBoard();
	renderBoard();
}

newGame();
</script>
</html>



